(this["webpackJsonpexpenses-wallet-project"]=this["webpackJsonpexpenses-wallet-project"]||[]).push([[0],{33:function(e,t,a){e.exports=a(45)},38:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(18),i=a.n(l),c=a(16),o=(a(38),a(13)),s=a(3),u=a(4),d=a(6),p=a(5),m=a(2),h=a(10),b=function(){return new Promise((function(e){fetch("https://economia.awesomeapi.com.br/json/all").then((function(t){t.json().then((function(t){e(t)}))}))}))},v=function(e){var t;return{type:"GET_CURRENCY",payload:{currency:(t=e,Object.keys(t)).filter((function(e){return"USDT"!==e}))}}},E=function(e){return{type:"TOTAL_UPDATE",payload:{value:e}}},f=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).validatePassword=n.validatePassword.bind(Object(h.a)(n)),n.validateEmail=n.validateEmail.bind(Object(h.a)(n)),n.validateButton=n.validateButton.bind(Object(h.a)(n)),n.btnClick=n.btnClick.bind(Object(h.a)(n)),n.state={disabled:!0,email:"",password:"",emailValidation:!1,passwordValidation:!1},n}return Object(u.a)(a,[{key:"validateButton",value:function(){var e=this.state,t=e.emailValidation,a=e.passwordValidation;t&&a?this.setState({disabled:!1}):this.setState({disabled:!0})}},{key:"validateEmail",value:function(e){var t=this,a=e.target.value;this.setState({email:a});this.state.email.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)/)?this.setState({emailValidation:!0},(function(){t.validateButton()})):this.setState({emailValidation:!1})}},{key:"validatePassword",value:function(e){var t=this,a=e.target.value,n=this.state.password;this.setState({password:a});n.length>=5?this.setState({passwordValidation:!0},(function(){t.validateButton()})):this.setState({passwordValidation:!1})}},{key:"btnClick",value:function(){(0,this.props.userDispatch)(this.state.email)}},{key:"render",value:function(){var e=this.state,t=e.disabled,a=e.password,n=e.email;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"text",name:"email",onChange:this.validateEmail,value:n,placeholder:"User","data-testid":"email-input"}),r.a.createElement("input",{type:"password",name:"password",onChange:this.validatePassword,value:a,placeholder:"Password","data-testid":"password-input"}),r.a.createElement(c.b,{to:"/expenses-wallet-project/carteira"},r.a.createElement("button",{type:"button",disabled:t,onClick:this.btnClick},"Entrar")))}}]),a}(r.a.Component),y=Object(o.b)(null,(function(e){return{userDispatch:function(t){return e(function(e){return{type:"USER_LOGIN",payload:{email:e}}}(t))}}}))(f),j=a(20),O=a(25),g=a.n(O),x=a(29),w=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.handleChange,a=e.value,n=e.description;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"value-input"},"Valor",r.a.createElement("input",{type:"text",id:"value-input",onChange:t,name:"value",value:a})),r.a.createElement("label",{htmlFor:"description-input"},"Descri\xe7\xe3o",r.a.createElement("input",{type:"text",id:"description-input",onChange:t,name:"description",value:n})))}}]),a}(r.a.Component),k=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(s.a)(this,a),(e=t.call(this)).onClick=e.onClick.bind(Object(h.a)(e)),e.handleChange=e.handleChange.bind(Object(h.a)(e));return e.state={payment:["Dinheiro","Cart\xe3o de d\xe9bito","Cart\xe3o de cr\xe9dito"],types:["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.currency)()}},{key:"onClick",value:function(){var e=Object(x.a)(g.a.mark((function e(){var t,a,n,r,l,i,c,o,s,u,d,p,m,h,v;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.value,n=t.description,r=t.currency,l=t.method,i=t.tag,c=this.props,o=c.expense,s=c.expenseGlobal,u=c.globalTotal,d=c.total,e.next=4,b();case 4:p=e.sent,m={id:s.length,value:a,description:n,currency:r,method:l,tag:i,exchangeRates:p},o(m),h=Object.entries(m.exchangeRates).find((function(e){return e[0]===r})),v=Number(u)+Number(h[1].ask)*Number(a),d(v.toFixed(2)),this.setState({value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(j.a)({},a,n))}},{key:"render",value:function(){var e=this.state,t=e.payment,a=e.types,n=e.value,l=e.description,i=e.currency,c=e.method,o=e.tag,s=this.props.currencies;return r.a.createElement("form",null,r.a.createElement(w,{handleChange:this.handleChange,value:n,description:l}),r.a.createElement("label",{htmlFor:"currency-select"},"Moeda",r.a.createElement("select",{id:"currency-select",onChange:this.handleChange,name:"currency",value:i},s.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("label",{htmlFor:"payment-type"},"M\xe9todo de pagamento",r.a.createElement("select",{id:"payment-type",onChange:this.handleChange,name:"method",value:c},t.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("label",{htmlFor:"tag"},"Tag",r.a.createElement("select",{id:"tag",onChange:this.handleChange,name:"tag",value:o},a.map((function(e,t){return r.a.createElement("option",{key:t},e)})))),r.a.createElement("button",{type:"button",onClick:this.onClick},"Adicionar despesa"))}}]),a}(r.a.Component),C=Object(o.b)((function(e){return{currencies:e.wallet.currencies,expenseGlobal:e.wallet.expenses,exchangeRates:e.wallet.exchangeRate,globalTotal:e.wallet.total}}),(function(e){return{currency:function(){return e((function(e){b().then((function(t){e(v(t))}))}))},expense:function(t){return e(function(e){return{type:"ADD_EXPENSE",payload:{expense:e}}}(t))},total:function(t){return e(E(t))}}}))(k),S=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.email,a=e.total,n=void 0===a?0:a;return r.a.createElement("header",null,r.a.createElement("span",null,"Ol\xe1, "),r.a.createElement("span",{"data-testid":"email-field"},t),"!",r.a.createElement("div",null,r.a.createElement("span",null,"Valor total: "),r.a.createElement("span",{"data-testid":"total-field"},n),r.a.createElement("span",{"data-testid":"header-currency-field"}," BRL")))}}]),a}(r.a.Component),R=Object(o.b)((function(e){return{email:e.user.email,total:e.wallet.total}}))(S),T=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).deleteExpense=e.deleteExpense.bind(Object(h.a)(e)),e.state={tableHeading:["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"]},e}return Object(u.a)(a,[{key:"deleteExpense",value:function(e){var t=this.props,a=t.expenses,n=t.remove,r=t.globalTotal,l=t.newTotal,i=a.filter((function(t){return t.id!==e.id})),c=e.currency,o=e.exchangeRates[c].ask,s=Number(e.value*o).toFixed(2);l(Number(r-s).toFixed(2)),n(i)}},{key:"render",value:function(){var e=this,t=this.state.tableHeading,a=this.props.expenses;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e,t){return r.a.createElement("th",{key:t},e)})))),r.a.createElement("tbody",null,a.map((function(t,a){var n=t.currency;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.tag),r.a.createElement("td",null,t.method),r.a.createElement("td",null,t.value),r.a.createElement("td",null,t.exchangeRates[n].name.split("/")[0]),r.a.createElement("td",null,parseFloat(t.exchangeRates[n].ask).toFixed(2)),r.a.createElement("td",null,parseFloat(t.value*t.exchangeRates[n].ask).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return e.deleteExpense(t)}},"Deletar")))}))))}}]),a}(r.a.Component),D=Object(o.b)((function(e){return{expenses:e.wallet.expenses,globalTotal:e.wallet.total}}),(function(e){return{remove:function(t){return e(function(e){return{type:"REMOVE_EXPENSE",payload:{expenses:e}}}(t))},newTotal:function(t){return e(E(t))}}}))(T),F=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,null),r.a.createElement(C,null),r.a.createElement(D,null))}}]),a}(r.a.Component),V=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/expenses-wallet-project",component:y}),r.a.createElement(m.a,{path:"/expenses-wallet-project/carteira",component:F}))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=a(14),N=a(30),P=a(31),_=a(11),U={email:""};var M=a(32),B={currencies:[],expenses:[],total:0,exchangeRate:""};var G=Object(A.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return Object(_.a)(Object(_.a)({},e),{},{email:t.payload.email});default:return e}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EXPENSE":return Object(_.a)(Object(_.a)({},e),{},{expenses:[].concat(Object(M.a)(e.expenses),[t.payload.expense])});case"GET_CURRENCY":return Object(_.a)(Object(_.a)({},e),{},{currencies:t.payload.currency});case"TOTAL_UPDATE":return Object(_.a)(Object(_.a)({},e),{},{total:t.payload.value});case"REMOVE_EXPENSE":return Object(_.a)(Object(_.a)({},e),{},{expenses:t.payload.expenses});default:return e}}}),L=Object(A.createStore)(G,Object(N.composeWithDevTools)(Object(A.applyMiddleware)(P.a)));i.a.render(r.a.createElement(c.a,null,r.a.createElement(o.a,{store:L},r.a.createElement(V,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.6cfe8873.chunk.js.map